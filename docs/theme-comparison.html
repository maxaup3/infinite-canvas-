<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Theme Comparison Tool - Infinite Canvas</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #1A1A1A;
      color: #fff;
      padding: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
    }

    h1 {
      font-size: 36px;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .controls {
      max-width: 1200px;
      margin: 0 auto 40px;
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .theme-selector {
      position: relative;
    }

    .theme-selector label {
      display: block;
      font-size: 14px;
      margin-bottom: 8px;
      color: rgba(255, 255, 255, 0.7);
    }

    .theme-selector select {
      padding: 12px 40px 12px 16px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(30, 30, 30, 0.8);
      color: #fff;
      font-size: 16px;
      cursor: pointer;
      appearance: none;
      min-width: 200px;
    }

    .theme-selector::after {
      content: '▼';
      position: absolute;
      right: 16px;
      top: 42px;
      pointer-events: none;
      color: rgba(255, 255, 255, 0.5);
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 30px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .theme-panel {
      background: rgba(30, 30, 30, 0.6);
      border-radius: 16px;
      padding: 30px;
      border: 2px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s;
    }

    .theme-panel:hover {
      border-color: rgba(255, 255, 255, 0.3);
      transform: translateY(-5px);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    }

    .theme-panel h2 {
      font-size: 24px;
      margin-bottom: 8px;
      text-align: center;
    }

    .theme-panel .description {
      text-align: center;
      font-size: 14px;
      color: rgba(255, 255, 255, 0.5);
      margin-bottom: 30px;
    }

    .viz-section {
      margin-bottom: 30px;
    }

    .viz-section h3 {
      font-size: 16px;
      margin-bottom: 15px;
      color: rgba(255, 255, 255, 0.8);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 8px;
    }

    .viz-container {
      width: 100%;
      height: 300px;
      position: relative;
    }

    .color-swatches {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 15px;
    }

    .color-swatch {
      aspect-ratio: 1;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    }

    .color-swatch:hover {
      transform: scale(1.1);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-top: 15px;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 15px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .stat-card .label {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.5);
      margin-bottom: 5px;
    }

    .stat-card .value {
      font-size: 18px;
      font-weight: 600;
    }

    .export-btn {
      background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      color: white;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 20px;
    }

    .export-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
    }

    .toggle-view {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 30px;
    }

    .toggle-btn {
      padding: 10px 20px;
      border-radius: 6px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(30, 30, 30, 0.8);
      color: rgba(255, 255, 255, 0.7);
      cursor: pointer;
      transition: all 0.3s;
    }

    .toggle-btn.active {
      background: rgba(102, 126, 234, 0.3);
      border-color: #667EEA;
      color: #fff;
    }

    .tooltip {
      position: absolute;
      padding: 10px 15px;
      background: rgba(0, 0, 0, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      font-size: 13px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 1000;
    }

    @media (max-width: 768px) {
      .comparison-grid {
        grid-template-columns: 1fr;
      }

      .controls {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Theme Comparison Tool</h1>
    <p style="color: rgba(255, 255, 255, 0.6);">Compare design systems side-by-side</p>
  </div>

  <div class="controls">
    <div class="theme-selector">
      <label>Theme 1</label>
      <select id="theme1">
        <option value="genz" selected>Gen-Z</option>
        <option value="minimalism">Minimalism</option>
        <option value="flat">Flat Design</option>
        <option value="glassmorphism">Glassmorphism</option>
        <option value="aurora">Aurora</option>
      </select>
    </div>

    <div class="theme-selector">
      <label>Theme 2</label>
      <select id="theme2">
        <option value="genz">Gen-Z</option>
        <option value="minimalism">Minimalism</option>
        <option value="flat">Flat Design</option>
        <option value="glassmorphism">Glassmorphism</option>
        <option value="aurora" selected>Aurora</option>
      </select>
    </div>
  </div>

  <div class="toggle-view">
    <button class="toggle-btn active" data-view="colors">Colors</button>
    <button class="toggle-btn" data-view="typography">Typography</button>
    <button class="toggle-btn" data-view="spacing">Spacing</button>
    <button class="toggle-btn" data-view="all">All</button>
  </div>

  <div class="comparison-grid" id="comparison-grid"></div>

  <div class="tooltip" id="tooltip"></div>

  <script>
    const themes = {
      genz: {
        name: 'Gen-Z',
        description: 'Z世代赛博朋克糖果美学',
        colors: ['#FF6B9D', '#C06CF8', '#00D4FF', '#FFC837', '#00FFA3', '#1A1A2E', '#FFFFFF', '#E0E0FF'],
        colorNames: ['Pink', 'Purple', 'Blue', 'Yellow', 'Green', 'Dark BG', 'White', 'Light'],
        typography: { sizes: [48, 36, 24, 18, 16, 14, 12], weights: [700, 700, 600, 500, 400, 400, 400] },
        spacing: [4, 8, 12, 16, 20, 24, 32, 40, 48, 64],
        accent: '#00D4FF',
        borderRadius: 24,
        blur: '20px',
        saturation: '200%'
      },
      minimalism: {
        name: 'Minimalism',
        description: '日式极简主义',
        colors: ['#212121', '#616161', '#9E9E9E', '#E0E0E0', '#FAFAFA', '#FFFFFF', '#000000', '#F5F5F5'],
        colorNames: ['Black', 'Dark', 'Medium', 'Light', 'BG', 'White', 'Pure', 'Off-white'],
        typography: { sizes: [48, 36, 24, 18, 16, 14, 12], weights: [300, 300, 400, 400, 400, 400, 400] },
        spacing: [4, 8, 12, 16, 24, 32, 40, 48, 64, 80],
        accent: '#212121',
        borderRadius: 0,
        blur: 'none',
        saturation: '100%'
      },
      flat: {
        name: 'Flat Design',
        description: '现代扁平化',
        colors: ['#3498DB', '#9B59B6', '#E74C3C', '#F39C12', '#2ECC71', '#1ABC9C', '#2C3E50', '#ECF0F1'],
        colorNames: ['Blue', 'Purple', 'Red', 'Orange', 'Green', 'Turquoise', 'Dark', 'BG'],
        typography: { sizes: [48, 36, 24, 18, 16, 14, 12], weights: [700, 700, 600, 400, 400, 400, 400] },
        spacing: [4, 8, 12, 16, 20, 24, 32, 40, 48, 56],
        accent: '#3498DB',
        borderRadius: 6,
        blur: 'none',
        saturation: '100%'
      },
      glassmorphism: {
        name: 'Glassmorphism',
        description: '新拟态玻璃',
        colors: ['#667EEA', '#764BA2', '#F093FB', 'rgba(255,255,255,0.1)', 'rgba(255,255,255,0.2)', '#FFFFFF', 'rgba(255,255,255,0.95)', 'rgba(255,255,255,0.75)'],
        colorNames: ['Purple', 'Mid', 'Pink', 'Glass', 'Border', 'White', 'Text 1', 'Text 2'],
        typography: { sizes: [48, 36, 24, 18, 16, 14, 12], weights: [600, 600, 500, 400, 400, 400, 400] },
        spacing: [4, 8, 12, 16, 20, 24, 32, 40, 48, 56],
        accent: '#FFFFFF',
        borderRadius: 20,
        blur: '40px',
        saturation: '180%'
      },
      aurora: {
        name: 'Aurora',
        description: '极光梦幻',
        colors: ['#6A11CB', '#2575FC', '#25FCAA', '#203A43', '#0F2027', 'rgba(255,255,255,0.95)', 'rgba(180,200,255,0.85)', '#1A2530'],
        colorNames: ['Purple', 'Blue', 'Cyan', 'Dark', 'Deep', 'White', 'Light', 'BG'],
        typography: { sizes: [48, 36, 24, 18, 16, 14, 12], weights: [600, 600, 500, 400, 400, 400, 400] },
        spacing: [4, 8, 12, 16, 20, 24, 32, 40, 48, 64],
        accent: '#25FCAA',
        borderRadius: 16,
        blur: '30px',
        saturation: '150%'
      }
    };

    let currentView = 'colors';
    const tooltip = d3.select('#tooltip');

    function createThemePanel(themeKey, containerId) {
      const theme = themes[themeKey];
      const container = d3.select(`#${containerId}`);
      container.html('');

      const panel = container.append('div')
        .attr('class', 'theme-panel');

      // Header
      panel.append('h2')
        .style('color', theme.accent)
        .text(theme.name);

      panel.append('div')
        .attr('class', 'description')
        .text(theme.description);

      // Color Swatches
      if (currentView === 'colors' || currentView === 'all') {
        const colorSection = panel.append('div').attr('class', 'viz-section');
        colorSection.append('h3').text('Color Palette');

        const swatches = colorSection.append('div').attr('class', 'color-swatches');

        theme.colors.forEach((color, i) => {
          swatches.append('div')
            .attr('class', 'color-swatch')
            .style('background', color)
            .style('color', getContrastColor(color))
            .on('mouseenter', function(event) {
              tooltip
                .style('opacity', 1)
                .html(`<strong>${theme.colorNames[i]}</strong><br>${color}`)
                .style('left', (event.pageX + 10) + 'px')
                .style('top', (event.pageY - 10) + 'px');
            })
            .on('mouseleave', () => tooltip.style('opacity', 0));
        });
      }

      // Typography Visualization
      if (currentView === 'typography' || currentView === 'all') {
        const typoSection = panel.append('div').attr('class', 'viz-section');
        typoSection.append('h3').text('Typography Scale');

        const vizContainer = typoSection.append('div')
          .attr('class', 'viz-container')
          .attr('id', `typo-${containerId}`);

        createTypographyViz(`typo-${containerId}`, theme);
      }

      // Spacing Visualization
      if (currentView === 'spacing' || currentView === 'all') {
        const spacingSection = panel.append('div').attr('class', 'viz-section');
        spacingSection.append('h3').text('Spacing System');

        const vizContainer = spacingSection.append('div')
          .attr('class', 'viz-container')
          .attr('id', `spacing-${containerId}`);

        createSpacingViz(`spacing-${containerId}`, theme);
      }

      // Stats
      const statsGrid = panel.append('div').attr('class', 'stats-grid');

      statsGrid.append('div')
        .attr('class', 'stat-card')
        .html(`<div class="label">Colors</div><div class="value">${theme.colors.length}</div>`);

      statsGrid.append('div')
        .attr('class', 'stat-card')
        .html(`<div class="label">Border Radius</div><div class="value">${theme.borderRadius}px</div>`);

      statsGrid.append('div')
        .attr('class', 'stat-card')
        .html(`<div class="label">Blur</div><div class="value">${theme.blur}</div>`);

      statsGrid.append('div')
        .attr('class', 'stat-card')
        .html(`<div class="label">Saturation</div><div class="value">${theme.saturation}</div>`);

      // Export button
      panel.append('button')
        .attr('class', 'export-btn')
        .text('Export Theme Data')
        .on('click', () => exportThemeData(themeKey));
    }

    function createTypographyViz(containerId, theme) {
      const container = d3.select(`#${containerId}`);
      const width = container.node().getBoundingClientRect().width;
      const height = 300;

      const svg = container.append('svg')
        .attr('width', width)
        .attr('height', height);

      const margin = { top: 20, right: 20, bottom: 40, left: 50 };
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;

      const g = svg.append('g')
        .attr('transform', `translate(${margin.left}, ${margin.top})`);

      const xScale = d3.scaleBand()
        .domain(theme.typography.sizes.map((_, i) => i))
        .range([0, innerWidth])
        .padding(0.2);

      const yScale = d3.scaleLinear()
        .domain([0, d3.max(theme.typography.sizes)])
        .range([innerHeight, 0]);

      g.selectAll('.bar')
        .data(theme.typography.sizes)
        .enter().append('rect')
        .attr('x', (d, i) => xScale(i))
        .attr('width', xScale.bandwidth())
        .attr('y', innerHeight)
        .attr('height', 0)
        .attr('fill', theme.accent)
        .attr('opacity', 0.7)
        .transition()
        .duration(800)
        .delay((d, i) => i * 100)
        .attr('y', d => yScale(d))
        .attr('height', d => innerHeight - yScale(d));

      g.append('g')
        .attr('transform', `translate(0, ${innerHeight})`)
        .call(d3.axisBottom(xScale))
        .selectAll('text')
        .attr('fill', 'rgba(255, 255, 255, 0.5)');

      g.append('g')
        .call(d3.axisLeft(yScale).ticks(5))
        .selectAll('text')
        .attr('fill', 'rgba(255, 255, 255, 0.5)');
    }

    function createSpacingViz(containerId, theme) {
      const container = d3.select(`#${containerId}`);
      const width = container.node().getBoundingClientRect().width;
      const height = 300;

      const svg = container.append('svg')
        .attr('width', width)
        .attr('height', height);

      const g = svg.append('g')
        .attr('transform', `translate(${width / 2}, ${height / 2})`);

      const maxSpacing = d3.max(theme.spacing);
      const scale = Math.min(width, height) / (maxSpacing * 2.5);

      theme.spacing.forEach((spacing, i) => {
        const size = spacing * scale;
        const angle = (i / theme.spacing.length) * Math.PI * 2;
        const distance = 60 + (i * 12);
        const x = Math.cos(angle) * distance - size / 2;
        const y = Math.sin(angle) * distance - size / 2;

        g.append('rect')
          .attr('x', x)
          .attr('y', y)
          .attr('width', 0)
          .attr('height', 0)
          .attr('fill', theme.accent)
          .attr('opacity', 0.6)
          .attr('rx', theme.borderRadius)
          .transition()
          .duration(600)
          .delay(i * 80)
          .attr('width', size)
          .attr('height', size);

        g.append('text')
          .attr('x', x + size / 2)
          .attr('y', y + size / 2)
          .attr('text-anchor', 'middle')
          .attr('dy', '0.35em')
          .attr('font-size', Math.max(8, size / 3) + 'px')
          .attr('font-weight', '600')
          .attr('fill', '#fff')
          .attr('opacity', 0)
          .text(spacing)
          .transition()
          .duration(400)
          .delay(i * 80 + 300)
          .attr('opacity', 1);
      });
    }

    function getContrastColor(color) {
      if (color.startsWith('rgba') && color.includes('0.1')) return '#fff';
      if (color === '#FFFFFF' || color === '#FAFAFA' || color === '#ECF0F1' || color === '#F5F5F5') return '#000';
      return '#fff';
    }

    function exportThemeData(themeKey) {
      const theme = themes[themeKey];
      const data = JSON.stringify(theme, null, 2);
      const blob = new Blob([data], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${themeKey}-theme-data.json`;
      a.click();
      URL.revokeObjectURL(url);
    }

    function updateComparison() {
      const theme1 = document.getElementById('theme1').value;
      const theme2 = document.getElementById('theme2').value;
      const grid = document.getElementById('comparison-grid');
      grid.innerHTML = '';

      const div1 = document.createElement('div');
      div1.id = 'panel1';
      grid.appendChild(div1);

      const div2 = document.createElement('div');
      div2.id = 'panel2';
      grid.appendChild(div2);

      createThemePanel(theme1, 'panel1');
      createThemePanel(theme2, 'panel2');
    }

    // Event listeners
    document.getElementById('theme1').addEventListener('change', updateComparison);
    document.getElementById('theme2').addEventListener('change', updateComparison);

    document.querySelectorAll('.toggle-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
        e.target.classList.add('active');
        currentView = e.target.dataset.view;
        updateComparison();
      });
    });

    // Initial render
    updateComparison();
  </script>
</body>
</html>
