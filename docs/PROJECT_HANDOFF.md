# Infinite Canvas é¡¹ç›®äº¤æ¥æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°
**é¡¹ç›®åç§°**: Infinite Canvas - æ— é™ç”»å¸ƒåˆ›ä½œå·¥å…·
**æŠ€æœ¯æ ˆ**: React + TypeScript + Vite + Framer Motion
**å½“å‰çŠ¶æ€**: æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆï¼Œæ­£åœ¨ä¼˜åŒ–è¿‡æ¸¡åŠ¨æ•ˆ

## å¼€å‘è¿›åº¦æ€»ç»“

### âœ… å·²å®Œæˆçš„åŠŸèƒ½

#### 1. æ ¸å¿ƒç”»å¸ƒç³»ç»Ÿ
- **æ— é™ç”»å¸ƒ** (`src/components/Canvas.tsx`)
  - æ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾ã€å¹³ç§»
  - å›¾å±‚ç®¡ç†ï¼ˆé€‰ä¸­ã€ç§»åŠ¨ã€åˆ é™¤ï¼‰
  - å¤šé€‰æ”¯æŒï¼ˆShift + ç‚¹å‡»ï¼‰
  - è¯„è®ºç³»ç»Ÿï¼ˆCé”®åˆ‡æ¢ç¼–è¾‘æ¨¡å¼ï¼‰

#### 2. ç”Ÿæˆç³»ç»Ÿ
- **åº•éƒ¨å¯¹è¯æ¡†** (`src/components/BottomDialog.tsx`)
  - å›¾åƒ/è§†é¢‘æ¨¡å¼åˆ‡æ¢
  - æ¨¡å‹é€‰æ‹©å™¨
  - æç¤ºè¯è¾“å…¥ï¼ˆæ”¯æŒæç¤ºè¯å¢å¼ºï¼‰
  - å‚è€ƒå›¾ç‰‡ä¸Šä¼ ï¼ˆæœ€å¤š10å¼ ï¼‰
  - å®½é«˜æ¯”é€‰æ‹©
  - LoRA é€‰æ‹©å™¨
  - éŸ³ç”»åŒæ­¥ï¼ˆä»…è§†é¢‘æ¨¡å¼ï¼‰
  - ç”Ÿæˆè¿›åº¦æ˜¾ç¤º

- **ç”Ÿæˆä»»åŠ¡ç®¡ç†**
  - å®æ—¶è¿›åº¦æ˜¾ç¤ºï¼ˆBorderBeam æ•ˆæœï¼‰
  - ä»»åŠ¡å®Œæˆåè‡ªåŠ¨æ·»åŠ åˆ°ç”»å¸ƒ
  - æ”¯æŒ Re-run å’Œ Edit åŠŸèƒ½

#### 3. UI ç»„ä»¶
- **é¦–é¡µ** (`src/components/LandingPage.tsx`)
  - æœ€è¿‘é¡¹ç›®å±•ç¤º
  - çµæ„Ÿç€‘å¸ƒæµï¼ˆ4åˆ—å¸ƒå±€ï¼‰
  - åˆ†ç±»æ ‡ç­¾ï¼ˆå…¨éƒ¨ã€å“ç‰Œè®¾è®¡ã€ç•Œé¢è§†è§‰ç­‰ï¼‰
  - ä¸»é¢˜åˆ‡æ¢ï¼ˆäº®è‰²/æš—è‰²ï¼‰
  - è¿‡æ¸¡æ–¹æ¡ˆåˆ‡æ¢å™¨

- **é¡¶éƒ¨æ ** (`src/components/TopBar.tsx`)
  - Logo
  - é¡¹ç›®åç§°ç¼–è¾‘
  - ç¼©æ”¾æ§åˆ¶
  - Credits æ˜¾ç¤º

- **å›¾å±‚é¢æ¿** (`src/components/LayerPanel.tsx`)
  - å›¾å±‚åˆ—è¡¨
  - å¯è§æ€§/é”å®šåˆ‡æ¢
  - å›¾å±‚é‡å‘½å

#### 4. ä¸»é¢˜ç³»ç»Ÿ
- **ThemeContext** (`src/contexts/ThemeContext.tsx`)
  - æ”¯æŒ 3 ç§ä¸»é¢˜ï¼šlightã€darkã€auto
  - è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿä¸»é¢˜åå¥½
  - å…¨å±€ä¸»é¢˜åˆ‡æ¢

#### 5. åŠ¨ç”»ç³»ç»Ÿï¼ˆå½“å‰é‡ç‚¹ï¼‰
- **åŸºç¡€åŠ¨ç”»åº“** (`src/lib/animations.ts`)
  - fadeIn, slideUp, slideDown, scaleIn ç­‰é¢„è®¾
  - Spring é…ç½®
  - å‡å°‘åŠ¨ç”»åå¥½æ£€æµ‹

### ğŸš§ è¿›è¡Œä¸­çš„å·¥ä½œ

#### è¿‡æ¸¡åŠ¨æ•ˆä¼˜åŒ–ï¼ˆClaude 1 è´Ÿè´£ï¼‰
**çŠ¶æ€**: æ­£åœ¨é‡æ„ï¼Œä½¿ç”¨æ›´é«˜çº§çš„æŠ€æœ¯

**å·²å®ç°çš„æ—§æ–¹æ¡ˆ**ï¼ˆæ•ˆæœä¸ä½³ï¼Œå¾…æ›¿æ¢ï¼‰:
- âŒ Liquid Morphï¼ˆæ¶²æ€å˜å½¢ï¼‰
- âŒ Depth Shiftï¼ˆæ·±åº¦æ¨ç§»ï¼‰
- âŒ Ripple Unfoldï¼ˆæ¶Ÿæ¼ªå±•å¼€ï¼‰
- âŒ Magnetic Snapï¼ˆç£å¸å½’ä½ï¼‰
- âŒ Light Sweepï¼ˆå…‰å½±æ‰«è¿‡ï¼‰

**æ–°æ–¹æ¡ˆè®¾è®¡**ï¼ˆæ­£åœ¨å®ç°ï¼‰:
1. â³ **Dialog Morph** - ä½¿ç”¨ `layoutId` å®ç°å…±äº«å…ƒç´ è¿‡æ¸¡
2. â³ **Curtain Reveal** - å¹•å¸ƒå¼å·¦å³åˆ†ç¦»æ•ˆæœ
3. â³ **Zoom Portal** - å¯¹è¯æ¡†æ”¾å¤§/ç¼©å°ä¼ é€é—¨æ•ˆæœ
4. â³ **Ink Spread** - åœ†å½¢è’™ç‰ˆæ‰©æ•£æ•ˆæœ
5. â³ **Page Fold** - 3D ç¿»é¡µæŠ˜å æ•ˆæœ

**ç›¸å…³æ–‡ä»¶**:
- `src/lib/newTransitions.ts` - æ–°çš„è¿‡æ¸¡åŠ¨ç”»é…ç½®
- `src/lib/transitionAnimations.ts` - æ—§çš„é…ç½®ï¼ˆå¾…åˆ é™¤ï¼‰
- `src/components/RippleEffect.tsx` - Canvas æ¶Ÿæ¼ªæ•ˆæœï¼ˆå¯èƒ½ä¸å†éœ€è¦ï¼‰
- `src/components/LightSweepEffect.tsx` - å…‰å½±æ•ˆæœï¼ˆå¯èƒ½ä¸å†éœ€è¦ï¼‰

### ğŸ“ é¡¹ç›®ç»“æ„

```
infinite-canvas/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Canvas.tsx              # æ ¸å¿ƒç”»å¸ƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ BottomDialog.tsx        # ç”Ÿæˆå¯¹è¯æ¡†ï¼ˆ2000+ è¡Œï¼‰
â”‚   â”‚   â”œâ”€â”€ LandingPage.tsx         # é¦–é¡µï¼ˆ2000+ è¡Œï¼‰
â”‚   â”‚   â”œâ”€â”€ TopBar.tsx              # é¡¶éƒ¨å¯¼èˆªæ 
â”‚   â”‚   â”œâ”€â”€ LayerPanel.tsx          # å›¾å±‚é¢æ¿
â”‚   â”‚   â”œâ”€â”€ ImageDetails.tsx        # å›¾ç‰‡è¯¦æƒ…é¢æ¿
â”‚   â”‚   â”œâ”€â”€ GeneratingOverlay.tsx   # ç”Ÿæˆä¸­çš„åŠ è½½åŠ¨ç”»
â”‚   â”‚   â”œâ”€â”€ ToastContainer.tsx      # é€šçŸ¥ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ ...å…¶ä»–ç»„ä»¶
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â””â”€â”€ ThemeContext.tsx        # ä¸»é¢˜ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ animations.ts           # åŸºç¡€åŠ¨ç”»å·¥å…·
â”‚   â”‚   â”œâ”€â”€ transitionAnimations.ts # æ—§çš„è¿‡æ¸¡åŠ¨ç”»ï¼ˆå¾…åˆ é™¤ï¼‰
â”‚   â”‚   â””â”€â”€ newTransitions.ts       # æ–°çš„è¿‡æ¸¡åŠ¨ç”»ï¼ˆæ­£åœ¨å¼€å‘ï¼‰
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts                # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ constants.ts            # æ ·å¼å¸¸é‡
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â””â”€â”€ icons/                  # SVG å›¾æ ‡
â”‚   â”œâ”€â”€ App.tsx                     # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ main.tsx                    # å…¥å£æ–‡ä»¶
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ plans/
â”‚   â”‚   â”œâ”€â”€ 2026-01-19-landing-to-canvas-transition-design.md  # æ—§æ–¹æ¡ˆè®¾è®¡
â”‚   â”‚   â””â”€â”€ 2026-01-19-transition-animations-v2.md             # æ—§æ–¹æ¡ˆè®¾è®¡v2
â”‚   â”œâ”€â”€ PROJECT_HANDOFF.md          # æœ¬æ–‡ä»¶
â”‚   â””â”€â”€ TRANSITION_IMPLEMENTATION_SUMMARY.md                    # æ—§æ–¹æ¡ˆæ€»ç»“
â””â”€â”€ package.json
```

### ğŸ”‘ å…³é”®ç±»å‹å®šä¹‰

```typescript
// ç”Ÿæˆé…ç½®
interface GenerationConfig {
  mode: 'image' | 'video';
  model: string;
  prompt: string;
  aspectRatio: string;
  count: number;
  enhancePrompt?: boolean;
  audioVideoSync?: boolean;
  referenceImage?: string | string[];
  loraName?: string;
  loraWeight?: number;
  // ... æ›´å¤šè§†é¢‘ç›¸å…³é…ç½®
}

// å›¾å±‚
interface ImageLayer {
  id: string;
  name: string;
  url: string;
  type: 'image' | 'video';
  x: number;
  y: number;
  width: number;
  height: number;
  visible: boolean;
  locked: boolean;
  selected: boolean;
  generationConfig?: GenerationConfig;
}

// ç”Ÿæˆä»»åŠ¡
interface GenerationTask {
  id: string;
  config: GenerationConfig;
  progress: number;
  status: 'generating' | 'completed' | 'failed';
  position: { x: number; y: number };
  width: number;
  height: number;
  createdAt: string;
}
```

## åˆ†å·¥è¯´æ˜

### ğŸ‘¨â€ğŸ’» Claude 1ï¼ˆå½“å‰å¼€å‘è€…ï¼‰- è´Ÿè´£å¤æ‚åŠ¨æ•ˆ

**ä¸»è¦èŒè´£**:
1. âœ… é¦–é¡µåˆ°ç”»å¸ƒçš„è¿‡æ¸¡åŠ¨æ•ˆï¼ˆ5ä¸ªæƒŠè‰³æ–¹æ¡ˆï¼‰
2. âœ… ç”ŸæˆåŠ è½½åŠ¨ç”»ä¼˜åŒ–
3. âœ… é¡µé¢åˆ‡æ¢åŠ¨ç”»
4. âœ… å¾®äº¤äº’åŠ¨ç”»ï¼ˆhoverã€ç‚¹å‡»åé¦ˆç­‰ï¼‰

**å½“å‰ä»»åŠ¡**:
- ğŸ”„ å®Œæˆ 5 ä¸ªæ–°è¿‡æ¸¡æ–¹æ¡ˆçš„å®ç°
- ğŸ”„ ç§»é™¤æ—§çš„è¿‡æ¸¡ä»£ç 
- ğŸ”„ ç¡®ä¿æ‰€æœ‰åŠ¨æ•ˆæµç•…ä¸”æ€§èƒ½è‰¯å¥½

**ä¸è´Ÿè´£**:
- âŒ ä¸šåŠ¡é€»è¾‘å¼€å‘
- âŒ æ–°åŠŸèƒ½æ·»åŠ 
- âŒ Bug ä¿®å¤ï¼ˆéåŠ¨æ•ˆç›¸å…³ï¼‰

### ğŸ‘¨â€ğŸ’» Claude 2ï¼ˆæ–°åŠ å…¥ï¼‰- è´Ÿè´£åŸºç¡€èƒ½åŠ›

**ä¸»è¦èŒè´£**:
1. âœ… æ ¸å¿ƒåŠŸèƒ½å¼€å‘å’Œä¼˜åŒ–
2. âœ… Bug ä¿®å¤
3. âœ… æ€§èƒ½ä¼˜åŒ–
4. âœ… æ–°åŠŸèƒ½å®ç°
5. âœ… æµ‹è¯•å’Œè´¨é‡ä¿è¯

**å¯ä»¥åšçš„**:
- âœ… ä¿®å¤ Canvas ç›¸å…³é—®é¢˜
- âœ… ä¼˜åŒ–ç”Ÿæˆæµç¨‹
- âœ… æ·»åŠ æ–°çš„å·¥å…·åŠŸèƒ½
- âœ… æ”¹è¿› UI/UXï¼ˆéåŠ¨æ•ˆéƒ¨åˆ†ï¼‰
- âœ… ä»£ç é‡æ„å’Œæ¸…ç†
- âœ… æ–‡æ¡£å®Œå–„

**ä¸è¦ç¢°çš„**:
- âŒ `src/lib/newTransitions.ts` - Claude 1 æ­£åœ¨å¼€å‘
- âŒ LandingPage ä¸­çš„è¿‡æ¸¡ç›¸å…³ä»£ç 
- âŒ App.tsx ä¸­çš„è¿‡æ¸¡çŠ¶æ€ç®¡ç†

## å½“å‰å·²çŸ¥é—®é¢˜

### ğŸ› éœ€è¦ä¿®å¤çš„é—®é¢˜ï¼ˆClaude 2 å¯ä»¥å¤„ç†ï¼‰

1. **TypeScript è­¦å‘Š**
   - éƒ¨åˆ†æµ‹è¯•æ–‡ä»¶ä¸­çš„ç±»å‹ä¸åŒ¹é…
   - æœªä½¿ç”¨çš„å˜é‡è­¦å‘Š
   - `Colors.text.tertiary` ä¸å­˜åœ¨

2. **åŠŸèƒ½é—®é¢˜**
   - GenerationTask ç¼ºå°‘ `width` å’Œ `height` å±æ€§
   - æŸäº›ç»„ä»¶çš„ props ç¼ºå¤±

3. **æ€§èƒ½é—®é¢˜**
   - BottomDialog ç»„ä»¶è¿‡å¤§ï¼ˆ2000+ è¡Œï¼‰ï¼Œéœ€è¦æ‹†åˆ†
   - LandingPage ç»„ä»¶è¿‡å¤§ï¼ˆ2000+ è¡Œï¼‰ï¼Œéœ€è¦æ‹†åˆ†

### âš ï¸ æ­£åœ¨è¿›è¡Œçš„å·¥ä½œï¼ˆClaude 1 åœ¨å¤„ç†ï¼‰

1. **è¿‡æ¸¡åŠ¨æ•ˆé‡æ„**
   - å½“å‰ 5 ä¸ªæ–¹æ¡ˆæ•ˆæœä¸ä½³
   - æ­£åœ¨ç”¨ FLIPã€Shared Layout ç­‰é«˜çº§æŠ€æœ¯é‡å†™
   - é¢„è®¡éœ€è¦å‡ ä¸ªå°æ—¶å®Œæˆ

## æŠ€æœ¯æ ˆè¯¦æƒ…

### æ ¸å¿ƒä¾èµ–
- **React** 18.3.1 - UI æ¡†æ¶
- **TypeScript** 5.6.2 - ç±»å‹å®‰å…¨
- **Vite** 5.4.21 - æ„å»ºå·¥å…·
- **Framer Motion** 12.26.2 - åŠ¨ç”»åº“ï¼ˆæ ¸å¿ƒï¼‰

### å¼€å‘å·¥å…·
- **ESLint** - ä»£ç è§„èŒƒ
- **Vitest** - å•å…ƒæµ‹è¯•
- **@testing-library/react** - React ç»„ä»¶æµ‹è¯•

### å…¶ä»–ä¾èµ–
- **date-fns** - æ—¥æœŸå¤„ç†
- **clsx** - ç±»ååˆå¹¶
- å„ç§ UI å·¥å…·åº“

## å¼€å‘ç¯å¢ƒ

### å¯åŠ¨é¡¹ç›®
```bash
npm run dev
# å½“å‰è¿è¡Œåœ¨ http://localhost:5186/
```

### æ„å»ºé¡¹ç›®
```bash
npm run build
```

### è¿è¡Œæµ‹è¯•
```bash
npm run test
```

## Git å·¥ä½œæµ

### å½“å‰çŠ¶æ€
- **åˆ†æ”¯**: mainï¼ˆæœªä½¿ç”¨ Git worktreesï¼‰
- **æœ€è¿‘æäº¤**: æ— ï¼ˆé¡¹ç›®å¯èƒ½æœªåˆå§‹åŒ– Gitï¼‰

### å»ºè®®
- Claude 1: ç»§ç»­åœ¨å½“å‰ç¯å¢ƒå·¥ä½œ
- Claude 2: å¯ä»¥åˆ›å»ºæ–°åˆ†æ”¯æˆ–ä½¿ç”¨ worktree

## æ²Ÿé€šåä½œ

### é¿å…å†²çª
1. **Claude 1** - åªä¿®æ”¹åŠ¨æ•ˆç›¸å…³æ–‡ä»¶
2. **Claude 2** - é¿å…ä¿®æ”¹ `src/lib/newTransitions.ts` å’Œè¿‡æ¸¡ç›¸å…³ä»£ç 

### éœ€è¦åè°ƒçš„æƒ…å†µ
- å¦‚æœéœ€è¦ä¿®æ”¹ `App.tsx` æˆ– `LandingPage.tsx`ï¼Œå…ˆç¡®è®¤å¯¹æ–¹æ˜¯å¦åœ¨ä¿®æ”¹
- å¦‚æœæ¶‰åŠè¿‡æ¸¡åŠ¨æ•ˆçš„ä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦ä¸¤äººåå•†

## ä¸‹ä¸€æ­¥å»ºè®®

### Claude 1ï¼ˆåŠ¨æ•ˆå¼€å‘è€…ï¼‰
1. âœ… å®Œæˆ Dialog Morph æ–¹æ¡ˆï¼ˆlayoutId å®ç°ï¼‰
2. âœ… å®ç° Curtain Reveal
3. âœ… å®ç° Zoom Portal
4. âœ… å®ç° Ink Spread
5. âœ… å®ç° Page Fold
6. âœ… åˆ é™¤æ—§çš„è¿‡æ¸¡ä»£ç å’Œç»„ä»¶
7. âœ… æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–

### Claude 2ï¼ˆåŸºç¡€èƒ½åŠ›å¼€å‘è€…ï¼‰
1. âœ… ä¿®å¤ TypeScript ç±»å‹é”™è¯¯
2. âœ… æ¸…ç†æœªä½¿ç”¨çš„ä»£ç å’Œå¯¼å…¥
3. âœ… æ‹†åˆ†å¤§å‹ç»„ä»¶ï¼ˆBottomDialogã€LandingPageï¼‰
4. âœ… æ·»åŠ  Colors.text.tertiary
5. âœ… ä¿®å¤ GenerationTask ç±»å‹é—®é¢˜
6. âœ… æ”¹è¿›ä»£ç ç»„ç»‡å’Œç»“æ„
7. âœ… å®Œå–„æµ‹è¯•è¦†ç›–

## é‡è¦æé†’

âš ï¸ **ä¸è¦åŒæ—¶ä¿®æ”¹åŒä¸€ä¸ªæ–‡ä»¶ï¼**
âš ï¸ **é‡åˆ°å†²çªç«‹å³æ²Ÿé€šï¼**
âš ï¸ **ä¿æŒä»£ç è´¨é‡å’Œä¸€è‡´æ€§ï¼**

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2026-01-19
**åˆ›å»ºè€…**: Claude 1 (åŠ¨æ•ˆå¼€å‘è€…)
**ç›®æ ‡è¯»è€…**: Claude 2 (åŸºç¡€èƒ½åŠ›å¼€å‘è€…)
