<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Infinite Canvas - Theme Visualizations</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0A0A0A;
      color: #fff;
      overflow-x: hidden;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    h1 {
      text-align: center;
      font-size: 48px;
      margin-bottom: 20px;
      background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      text-align: center;
      font-size: 18px;
      color: rgba(255, 255, 255, 0.6);
      margin-bottom: 60px;
    }

    .theme-section {
      margin-bottom: 100px;
      opacity: 0;
      animation: fadeIn 1s forwards;
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    .theme-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .theme-title {
      font-size: 36px;
      margin-bottom: 10px;
    }

    .theme-description {
      font-size: 16px;
      color: rgba(255, 255, 255, 0.5);
    }

    .viz-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 40px;
      margin-bottom: 40px;
    }

    .viz-card {
      background: rgba(30, 30, 30, 0.8);
      border-radius: 16px;
      padding: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .viz-card h3 {
      font-size: 20px;
      margin-bottom: 20px;
      text-align: center;
    }

    .viz-container {
      width: 100%;
      height: 400px;
      position: relative;
    }

    svg {
      width: 100%;
      height: 100%;
    }

    .color-info {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 14px;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }

    .tooltip {
      position: absolute;
      padding: 10px 15px;
      background: rgba(0, 0, 0, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      font-size: 13px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 1000;
    }

    .spacing-grid {
      display: grid;
      gap: 8px;
    }

    .spacing-item {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      padding: 8px;
      transition: all 0.3s;
      cursor: pointer;
    }

    .spacing-item:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Infinite Canvas Theme System</h1>
    <p class="subtitle">Interactive D3.js visualizations showcasing the design language of each theme</p>

    <!-- Gen-Z Theme -->
    <div class="theme-section" id="genz">
      <div class="theme-header">
        <h2 class="theme-title" style="background: linear-gradient(90deg, #FF6B9D 0%, #C06CF8 25%, #00D4FF 50%, #FFC837 75%, #FF6B9D 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Gen-Z Theme</h2>
        <p class="theme-description">Z世代赛博朋克糖果美学 - High saturation gradients with neon aesthetics</p>
      </div>
      <div class="viz-grid">
        <div class="viz-card">
          <h3>Color Palette Wheel</h3>
          <div class="viz-container" id="genz-colors"></div>
        </div>
        <div class="viz-card">
          <h3>Typography Scale</h3>
          <div class="viz-container" id="genz-typography"></div>
        </div>
        <div class="viz-card">
          <h3>Spacing System</h3>
          <div class="viz-container" id="genz-spacing"></div>
        </div>
      </div>
    </div>

    <!-- Minimalism Theme -->
    <div class="theme-section" id="minimalism">
      <div class="theme-header">
        <h2 class="theme-title" style="color: #212121; background: #FAFAFA; padding: 10px 30px; border: 2px solid #212121;">Minimalism Theme</h2>
        <p class="theme-description">日式极简主义 - Pure simplicity with high contrast</p>
      </div>
      <div class="viz-grid">
        <div class="viz-card" style="background: #FFFFFF; border: 1px solid #E0E0E0;">
          <h3 style="color: #212121;">Color Palette Wheel</h3>
          <div class="viz-container" id="minimalism-colors"></div>
        </div>
        <div class="viz-card" style="background: #FFFFFF; border: 1px solid #E0E0E0;">
          <h3 style="color: #212121;">Typography Scale</h3>
          <div class="viz-container" id="minimalism-typography"></div>
        </div>
        <div class="viz-card" style="background: #FFFFFF; border: 1px solid #E0E0E0;">
          <h3 style="color: #212121;">Spacing System</h3>
          <div class="viz-container" id="minimalism-spacing"></div>
        </div>
      </div>
    </div>

    <!-- Flat Design Theme -->
    <div class="theme-section" id="flat">
      <div class="theme-header">
        <h2 class="theme-title" style="color: #2C3E50; background: linear-gradient(90deg, #3498DB 0%, #9B59B6 33%, #E74C3C 66%, #F39C12 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Flat Design Theme</h2>
        <p class="theme-description">现代扁平化 - Bold colors with no shadows</p>
      </div>
      <div class="viz-grid">
        <div class="viz-card" style="background: #FFFFFF; border: none;">
          <h3 style="color: #2C3E50;">Color Palette Wheel</h3>
          <div class="viz-container" id="flat-colors"></div>
        </div>
        <div class="viz-card" style="background: #FFFFFF; border: none;">
          <h3 style="color: #2C3E50;">Typography Scale</h3>
          <div class="viz-container" id="flat-typography"></div>
        </div>
        <div class="viz-card" style="background: #FFFFFF; border: none;">
          <h3 style="color: #2C3E50;">Spacing System</h3>
          <div class="viz-container" id="flat-spacing"></div>
        </div>
      </div>
    </div>

    <!-- Glassmorphism Theme -->
    <div class="theme-section" id="glassmorphism">
      <div class="theme-header">
        <h2 class="theme-title" style="color: rgba(255, 255, 255, 0.95); text-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);">Glassmorphism Theme</h2>
        <p class="theme-description">新拟态玻璃 - Frosted glass effects with soft transparency</p>
      </div>
      <div class="viz-grid">
        <div class="viz-card" style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(40px); border: 1px solid rgba(255, 255, 255, 0.2);">
          <h3>Color Palette Wheel</h3>
          <div class="viz-container" id="glassmorphism-colors"></div>
        </div>
        <div class="viz-card" style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(40px); border: 1px solid rgba(255, 255, 255, 0.2);">
          <h3>Typography Scale</h3>
          <div class="viz-container" id="glassmorphism-typography"></div>
        </div>
        <div class="viz-card" style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(40px); border: 1px solid rgba(255, 255, 255, 0.2);">
          <h3>Spacing System</h3>
          <div class="viz-container" id="glassmorphism-spacing"></div>
        </div>
      </div>
    </div>

    <!-- Aurora Theme -->
    <div class="theme-section" id="aurora">
      <div class="theme-header">
        <h2 class="theme-title" style="background: linear-gradient(135deg, #6A11CB 0%, #2575FC 50%, #25FCAA 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Aurora Theme</h2>
        <p class="theme-description">极光梦幻 - Northern lights inspired gradients and flowing animations</p>
      </div>
      <div class="viz-grid">
        <div class="viz-card" style="background: rgba(15, 20, 30, 0.6); backdrop-filter: blur(30px); border: 1px solid rgba(106, 17, 203, 0.5);">
          <h3>Color Palette Wheel</h3>
          <div class="viz-container" id="aurora-colors"></div>
        </div>
        <div class="viz-card" style="background: rgba(15, 20, 30, 0.6); backdrop-filter: blur(30px); border: 1px solid rgba(106, 17, 203, 0.5);">
          <h3>Typography Scale</h3>
          <div class="viz-container" id="aurora-typography"></div>
        </div>
        <div class="viz-card" style="background: rgba(15, 20, 30, 0.6); backdrop-filter: blur(30px); border: 1px solid rgba(106, 17, 203, 0.5);">
          <h3>Spacing System</h3>
          <div class="viz-container" id="aurora-spacing"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Theme Data
    const themes = {
      genz: {
        name: 'Gen-Z',
        colors: [
          { name: 'Primary Pink', value: '#FF6B9D' },
          { name: 'Purple', value: '#C06CF8' },
          { name: 'Electric Blue', value: '#00D4FF' },
          { name: 'Yellow', value: '#FFC837' },
          { name: 'Neon Green', value: '#00FFA3' },
          { name: 'Background', value: '#1A1A2E' },
          { name: 'Panel', value: 'rgba(20, 20, 40, 0.75)' },
          { name: 'Text Primary', value: '#FFFFFF' }
        ],
        typography: [
          { label: 'Heading XL', size: 48, weight: 700 },
          { label: 'Heading L', size: 36, weight: 700 },
          { label: 'Heading M', size: 24, weight: 600 },
          { label: 'Body L', size: 18, weight: 500 },
          { label: 'Body M', size: 16, weight: 400 },
          { label: 'Body S', size: 14, weight: 400 },
          { label: 'Caption', size: 12, weight: 400 }
        ],
        spacing: [4, 8, 12, 16, 20, 24, 32, 40, 48, 64],
        accent: '#00D4FF'
      },
      minimalism: {
        name: 'Minimalism',
        colors: [
          { name: 'Black', value: '#212121' },
          { name: 'Dark Gray', value: '#616161' },
          { name: 'Medium Gray', value: '#9E9E9E' },
          { name: 'Light Gray', value: '#E0E0E0' },
          { name: 'Background', value: '#FAFAFA' },
          { name: 'White', value: '#FFFFFF' },
          { name: 'Text Primary', value: '#212121' },
          { name: 'Accent', value: '#000000' }
        ],
        typography: [
          { label: 'Heading XL', size: 48, weight: 300 },
          { label: 'Heading L', size: 36, weight: 300 },
          { label: 'Heading M', size: 24, weight: 400 },
          { label: 'Body L', size: 18, weight: 400 },
          { label: 'Body M', size: 16, weight: 400 },
          { label: 'Body S', size: 14, weight: 400 },
          { label: 'Caption', size: 12, weight: 400 }
        ],
        spacing: [4, 8, 12, 16, 24, 32, 40, 48, 64, 80],
        accent: '#212121'
      },
      flat: {
        name: 'Flat Design',
        colors: [
          { name: 'Blue', value: '#3498DB' },
          { name: 'Purple', value: '#9B59B6' },
          { name: 'Red', value: '#E74C3C' },
          { name: 'Orange', value: '#F39C12' },
          { name: 'Green', value: '#2ECC71' },
          { name: 'Turquoise', value: '#1ABC9C' },
          { name: 'Text', value: '#2C3E50' },
          { name: 'Background', value: '#ECF0F1' }
        ],
        typography: [
          { label: 'Heading XL', size: 48, weight: 700 },
          { label: 'Heading L', size: 36, weight: 700 },
          { label: 'Heading M', size: 24, weight: 600 },
          { label: 'Body L', size: 18, weight: 400 },
          { label: 'Body M', size: 16, weight: 400 },
          { label: 'Body S', size: 14, weight: 400 },
          { label: 'Caption', size: 12, weight: 400 }
        ],
        spacing: [4, 8, 12, 16, 20, 24, 32, 40, 48, 56],
        accent: '#3498DB'
      },
      glassmorphism: {
        name: 'Glassmorphism',
        colors: [
          { name: 'Purple Start', value: '#667EEA' },
          { name: 'Purple Mid', value: '#764BA2' },
          { name: 'Pink', value: '#F093FB' },
          { name: 'Glass White', value: 'rgba(255, 255, 255, 0.1)' },
          { name: 'Glass Border', value: 'rgba(255, 255, 255, 0.2)' },
          { name: 'Text Primary', value: 'rgba(255, 255, 255, 0.95)' },
          { name: 'Text Secondary', value: 'rgba(255, 255, 255, 0.75)' },
          { name: 'Accent', value: '#FFFFFF' }
        ],
        typography: [
          { label: 'Heading XL', size: 48, weight: 600 },
          { label: 'Heading L', size: 36, weight: 600 },
          { label: 'Heading M', size: 24, weight: 500 },
          { label: 'Body L', size: 18, weight: 400 },
          { label: 'Body M', size: 16, weight: 400 },
          { label: 'Body S', size: 14, weight: 400 },
          { label: 'Caption', size: 12, weight: 400 }
        ],
        spacing: [4, 8, 12, 16, 20, 24, 32, 40, 48, 56],
        accent: '#FFFFFF'
      },
      aurora: {
        name: 'Aurora',
        colors: [
          { name: 'Purple', value: '#6A11CB' },
          { name: 'Blue', value: '#2575FC' },
          { name: 'Cyan', value: '#25FCAA' },
          { name: 'Dark Blue', value: '#203A43' },
          { name: 'Deep Dark', value: '#0F2027' },
          { name: 'Text Primary', value: 'rgba(255, 255, 255, 0.95)' },
          { name: 'Text Accent', value: 'rgba(180, 200, 255, 0.85)' },
          { name: 'Aurora Green', value: '#25FCAA' }
        ],
        typography: [
          { label: 'Heading XL', size: 48, weight: 600 },
          { label: 'Heading L', size: 36, weight: 600 },
          { label: 'Heading M', size: 24, weight: 500 },
          { label: 'Body L', size: 18, weight: 400 },
          { label: 'Body M', size: 16, weight: 400 },
          { label: 'Body S', size: 14, weight: 400 },
          { label: 'Caption', size: 12, weight: 400 }
        ],
        spacing: [4, 8, 12, 16, 20, 24, 32, 40, 48, 64],
        accent: '#25FCAA'
      }
    };

    // Create Color Wheel Visualization
    function createColorWheel(containerId, theme) {
      const container = d3.select(`#${containerId}`);
      const width = container.node().getBoundingClientRect().width;
      const height = 400;
      const radius = Math.min(width, height) / 2 - 40;

      const svg = container.append('svg')
        .attr('viewBox', `0 0 ${width} ${height}`)
        .attr('preserveAspectRatio', 'xMidYMid meet');

      const g = svg.append('g')
        .attr('transform', `translate(${width / 2}, ${height / 2})`);

      const pie = d3.pie()
        .value(1)
        .sort(null);

      const arc = d3.arc()
        .innerRadius(radius * 0.4)
        .outerRadius(radius);

      const arcHover = d3.arc()
        .innerRadius(radius * 0.4)
        .outerRadius(radius * 1.1);

      const arcs = g.selectAll('.arc')
        .data(pie(theme.colors))
        .enter().append('g')
        .attr('class', 'arc');

      arcs.append('path')
        .attr('d', arc)
        .attr('fill', d => {
          const color = d.data.value;
          if (color.startsWith('rgba')) {
            return color.replace(/[\d.]+\)$/, '0.8)');
          }
          return color;
        })
        .attr('stroke', theme.name === 'Minimalism' ? '#212121' : 'rgba(255, 255, 255, 0.2)')
        .attr('stroke-width', theme.name === 'Minimalism' ? 2 : 1)
        .style('cursor', 'pointer')
        .on('mouseenter', function(event, d) {
          d3.select(this)
            .transition()
            .duration(300)
            .attr('d', arcHover)
            .attr('opacity', 0.9);

          tooltip
            .style('opacity', 1)
            .html(`<strong>${d.data.name}</strong><br>${d.data.value}`)
            .style('left', (event.pageX + 10) + 'px')
            .style('top', (event.pageY - 10) + 'px');
        })
        .on('mouseleave', function() {
          d3.select(this)
            .transition()
            .duration(300)
            .attr('d', arc)
            .attr('opacity', 1);

          tooltip.style('opacity', 0);
        });

      // Add center circle
      g.append('circle')
        .attr('r', radius * 0.4)
        .attr('fill', theme.name === 'Minimalism' ? '#FFFFFF' : theme.name === 'Flat Design' ? '#ECF0F1' : 'rgba(0, 0, 0, 0.3)')
        .attr('stroke', theme.accent)
        .attr('stroke-width', 2);

      // Add theme name in center
      g.append('text')
        .attr('text-anchor', 'middle')
        .attr('dy', '0.35em')
        .attr('font-size', '18px')
        .attr('font-weight', '600')
        .attr('fill', theme.name === 'Minimalism' ? '#212121' : theme.name === 'Flat Design' ? '#2C3E50' : '#fff')
        .text(theme.name);

      // Animate rotation
      g.transition()
        .duration(2000)
        .attrTween('transform', function() {
          return d3.interpolateString(`translate(${width / 2}, ${height / 2}) rotate(0)`, `translate(${width / 2}, ${height / 2}) rotate(360)`);
        });
    }

    // Create Typography Visualization
    function createTypography(containerId, theme) {
      const container = d3.select(`#${containerId}`);
      const width = container.node().getBoundingClientRect().width;
      const height = 400;

      const svg = container.append('svg')
        .attr('viewBox', `0 0 ${width} ${height}`)
        .attr('preserveAspectRatio', 'xMidYMid meet');

      const margin = { top: 20, right: 20, bottom: 40, left: 60 };
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;

      const g = svg.append('g')
        .attr('transform', `translate(${margin.left}, ${margin.top})`);

      const xScale = d3.scaleBand()
        .domain(theme.typography.map(d => d.label))
        .range([0, innerWidth])
        .padding(0.2);

      const yScale = d3.scaleLinear()
        .domain([0, d3.max(theme.typography, d => d.size)])
        .range([innerHeight, 0]);

      // Create gradient
      const gradient = svg.append('defs')
        .append('linearGradient')
        .attr('id', `gradient-${containerId}`)
        .attr('x1', '0%')
        .attr('y1', '0%')
        .attr('x2', '0%')
        .attr('y2', '100%');

      gradient.append('stop')
        .attr('offset', '0%')
        .attr('stop-color', theme.accent)
        .attr('stop-opacity', 0.8);

      gradient.append('stop')
        .attr('offset', '100%')
        .attr('stop-color', theme.accent)
        .attr('stop-opacity', 0.3);

      // Add bars
      g.selectAll('.bar')
        .data(theme.typography)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', d => xScale(d.label))
        .attr('width', xScale.bandwidth())
        .attr('y', innerHeight)
        .attr('height', 0)
        .attr('fill', `url(#gradient-${containerId})`)
        .attr('rx', theme.name === 'Minimalism' ? 0 : 4)
        .style('cursor', 'pointer')
        .on('mouseenter', function(event, d) {
          d3.select(this)
            .transition()
            .duration(200)
            .attr('opacity', 0.7);

          tooltip
            .style('opacity', 1)
            .html(`<strong>${d.label}</strong><br>Size: ${d.size}px<br>Weight: ${d.weight}`)
            .style('left', (event.pageX + 10) + 'px')
            .style('top', (event.pageY - 10) + 'px');
        })
        .on('mouseleave', function() {
          d3.select(this)
            .transition()
            .duration(200)
            .attr('opacity', 1);

          tooltip.style('opacity', 0);
        })
        .transition()
        .duration(1000)
        .delay((d, i) => i * 100)
        .attr('y', d => yScale(d.size))
        .attr('height', d => innerHeight - yScale(d.size));

      // Add axes
      const textColor = theme.name === 'Minimalism' ? '#212121' : theme.name === 'Flat Design' ? '#2C3E50' : 'rgba(255, 255, 255, 0.7)';

      g.append('g')
        .attr('transform', `translate(0, ${innerHeight})`)
        .call(d3.axisBottom(xScale))
        .selectAll('text')
        .attr('transform', 'rotate(-45)')
        .style('text-anchor', 'end')
        .attr('fill', textColor)
        .attr('font-size', '11px');

      g.append('g')
        .call(d3.axisLeft(yScale))
        .selectAll('text')
        .attr('fill', textColor)
        .attr('font-size', '11px');

      g.selectAll('.domain, .tick line')
        .attr('stroke', textColor)
        .attr('stroke-opacity', 0.3);
    }

    // Create Spacing System Visualization
    function createSpacing(containerId, theme) {
      const container = d3.select(`#${containerId}`);
      const width = container.node().getBoundingClientRect().width;
      const height = 400;

      const svg = container.append('svg')
        .attr('viewBox', `0 0 ${width} ${height}`)
        .attr('preserveAspectRatio', 'xMidYMid meet');

      const margin = { top: 40, right: 40, bottom: 40, left: 40 };
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;

      const g = svg.append('g')
        .attr('transform', `translate(${margin.left}, ${margin.top})`);

      const maxSpacing = d3.max(theme.spacing);
      const scale = Math.min(innerWidth, innerHeight) / (maxSpacing * 2.5);

      // Create geometric pattern
      const pattern = g.append('g')
        .attr('transform', `translate(${innerWidth / 2}, ${innerHeight / 2})`);

      theme.spacing.forEach((spacing, i) => {
        const size = spacing * scale;
        const angle = (i / theme.spacing.length) * Math.PI * 2;
        const distance = 80 + (i * 15);
        const x = Math.cos(angle) * distance - size / 2;
        const y = Math.sin(angle) * distance - size / 2;

        const rect = pattern.append('rect')
          .attr('x', x)
          .attr('y', y)
          .attr('width', 0)
          .attr('height', 0)
          .attr('fill', theme.accent)
          .attr('fill-opacity', 0.6)
          .attr('stroke', theme.name === 'Minimalism' ? '#212121' : theme.name === 'Flat Design' ? '#2C3E50' : 'rgba(255, 255, 255, 0.4)')
          .attr('stroke-width', theme.name === 'Minimalism' ? 2 : 1)
          .attr('rx', theme.name === 'Minimalism' ? 0 : theme.name === 'Gen-Z' ? size / 2 : 4)
          .style('cursor', 'pointer')
          .on('mouseenter', function(event) {
            d3.select(this)
              .transition()
              .duration(200)
              .attr('fill-opacity', 1)
              .attr('transform', 'scale(1.1)');

            tooltip
              .style('opacity', 1)
              .html(`<strong>Spacing:</strong> ${spacing}px`)
              .style('left', (event.pageX + 10) + 'px')
              .style('top', (event.pageY - 10) + 'px');
          })
          .on('mouseleave', function() {
            d3.select(this)
              .transition()
              .duration(200)
              .attr('fill-opacity', 0.6)
              .attr('transform', 'scale(1)');

            tooltip.style('opacity', 0);
          });

        rect.transition()
          .duration(800)
          .delay(i * 100)
          .attr('width', size)
          .attr('height', size);

        // Add label
        pattern.append('text')
          .attr('x', x + size / 2)
          .attr('y', y + size / 2)
          .attr('text-anchor', 'middle')
          .attr('dy', '0.35em')
          .attr('font-size', Math.max(10, size / 3.5) + 'px')
          .attr('font-weight', '600')
          .attr('fill', theme.name === 'Minimalism' ? '#FFFFFF' : theme.name === 'Flat Design' ? '#FFFFFF' : theme.name === 'Gen-Z' ? '#FFFFFF' : 'rgba(0, 0, 0, 0.8)')
          .attr('opacity', 0)
          .text(spacing)
          .transition()
          .duration(500)
          .delay(i * 100 + 400)
          .attr('opacity', 1);
      });

      // Add center circle
      const centerCircle = pattern.append('circle')
        .attr('r', 0)
        .attr('fill', 'none')
        .attr('stroke', theme.accent)
        .attr('stroke-width', 2)
        .attr('stroke-dasharray', '5,5');

      centerCircle.transition()
        .duration(1500)
        .attr('r', 70);

      // Rotate pattern
      function rotate() {
        pattern.transition()
          .duration(20000)
          .ease(d3.easeLinear)
          .attrTween('transform', function() {
            return d3.interpolateString(
              `translate(${innerWidth / 2}, ${innerHeight / 2}) rotate(0)`,
              `translate(${innerWidth / 2}, ${innerHeight / 2}) rotate(360)`
            );
          })
          .on('end', rotate);
      }
      rotate();
    }

    // Create tooltip
    const tooltip = d3.select('body').append('div')
      .attr('class', 'tooltip');

    // Initialize all visualizations
    Object.keys(themes).forEach(themeKey => {
      const theme = themes[themeKey];
      createColorWheel(`${themeKey}-colors`, theme);
      createTypography(`${themeKey}-typography`, theme);
      createSpacing(`${themeKey}-spacing`, theme);
    });

    // Stagger animation for theme sections
    d3.selectAll('.theme-section').each(function(d, i) {
      d3.select(this).style('animation-delay', `${i * 0.2}s`);
    });

    // Apply special background to body based on current visible theme
    const body = d3.select('body');

    // Gen-Z background
    const genzSection = document.getElementById('genz');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const themeId = entry.target.id;
          switch(themeId) {
            case 'genz':
              body.style('background', 'linear-gradient(135deg, #1A1A2E 0%, #16213E 50%, #0F3460 100%)');
              break;
            case 'minimalism':
              body.style('background', '#FAFAFA');
              break;
            case 'flat':
              body.style('background', '#ECF0F1');
              break;
            case 'glassmorphism':
              body.style('background', 'linear-gradient(135deg, #667EEA 0%, #764BA2 50%, #F093FB 100%)');
              break;
            case 'aurora':
              body.style('background', 'linear-gradient(135deg, #0F2027 0%, #203A43 25%, #2C5364 50%, #203A43 75%, #0F2027 100%)');
              break;
          }
        }
      });
    }, { threshold: 0.5 });

    document.querySelectorAll('.theme-section').forEach(section => {
      observer.observe(section);
    });
  </script>
</body>
</html>
